<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TV Tuner Commercials Detector</title>
    <meta name="description" content="I am writing about my experiences as a software developer.">
    <link rel="alternate" href="/feed/feed.xml" type="application/atom+xml" title="James Lawler">
    <link rel="alternate" href="/feed/feed.json" type="application/json" title="James Lawler">
    <meta name="generator" content="Eleventy v2.0.1">

    <link rel="stylesheet" href="/assets/css/tailwind.css">

    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <script defer data-domain="jameslawler.com" src="https://api.jameslawler.com/js/script.outbound-links.js"></script>
  </head>
  <body class="flex flex-col container mx-auto min-h-screen dark:bg-slate-900">
    <a href="#skip" class="hidden visually-hidden">Skip to main content</a>

    <header>
      <div class="flex items-center mt-4 md:mt-12">
        <div class="flex flex-col flex-1">
          <a href="/" class="text-3xl pb-6 font-bold dark:text-gray-100">James Lawler</a>
          <nav>
            <h2 class="hidden visually-hidden">Top level navigation menu</h2>
            <ul class="flex flex-row flex-wrap gap-2 md:gap-8">
              <li class="dark:text-gray-100"><a class="p-2 md:p-4 first:pl-0" href="/">Home</a></li>
              <li class="dark:text-gray-100"><a class="p-2 md:p-4 first:pl-0" href="/articles/">Articles</a></li>
              <li class="dark:text-gray-100"><a class="p-2 md:p-4 first:pl-0" href="/projects/">Projects</a></li>
              <li class="dark:text-gray-100"><a class="p-2 md:p-4 first:pl-0" href="/notes/">Notes</a></li>
              <li class="dark:text-gray-100"><a class="p-2 md:p-4 first:pl-0" href="/follow-me/">Follow Me</a></li>
            </ul>
          </nav>
        </div>
        <img src="/img/james-lawler.jpg" class="hidden size-20 rounded-full md:block" alt="James Lawler" />
      </div>
      
    </header>

    <hr class="my-8 h-px bg-gray-400 border-0 dark:bg-gray-100">

    <main id="skip" class="prose max-w-none flex-grow pb-24 dark:prose-invert">
      
<h1 class="text-3xl font-bold mb-4 dark:text-gray-100">TV Tuner Commercials Detector</h1>



<p>One of the first big projects I created for fun was to learn how to write C++ code to use DirectX to read data from a DVB-T tuner card.</p>
<p>It is quite hard for me to remember most of the project details, but I try below to keep a record of the project.</p>
<h2>Idea</h2>
<p>The project idea was to be able to record live TV streams from my DVB-T card, analyse the stream and try to predict where the TV commercials are.</p>
<h2>Record stream</h2>
<p>The DirectX tool back in 2004 provided a GUI to be able to create a pipeline of filters from the TV input to pass it through various filters.</p>
<p><picture><source type="image/avif" srcset="/img/rDwuMS5l9I-685.avif 685w"><source type="image/webp" srcset="/img/rDwuMS5l9I-685.webp 685w"><img alt="DirectX Filter" loading="lazy" decoding="async" src="/img/rDwuMS5l9I-685.png" width="685" height="220"></picture></p>
<h2>Commercial detection</h2>
<p>To try and detect commericals, I used various analysis techniques like.</p>
<ul>
<li>Check the amount of dark pixels as a percentage to try and detect the fading in and out of the video as the screen goes dark between the TV show and commercials.</li>
<li>Detect when the sound goes quiet at the same time as the screen goes dark.</li>
<li>Mark all of the locations with quiet sound and dark video and use analysis to detect the most likely commercial positions. For example, each commercial is usually 30 seconds long and a total commercial break was about 2.5 - 3 minutes.</li>
</ul>
<h2>Results</h2>
<p>I enjoyed building this project and learning C++, DirectX, video pixel anaylsis. I used the project personally for a while, but over time with streaming services like Netflix, the project became obsolete.</p>


    </main>

    <footer class="mx-auto pb-4">Copyright 2025 - James Lawler</footer>
  </body>
</html>
