<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom" xml:base="en">
	<title>James Lawler</title>
	<subtitle>I am writing about my experiences as a naval navel-gazer.</subtitle>
	<link href="https://www.jameslawler.com/feed/feed.xml" rel="self"/>
	<link href="https://www.jameslawler.com/"/>
	<updated>2021-12-17T00:00:00Z</updated>
	<id>https://www.jameslawler.com/</id>
	<author>
		<name>James Lawler</name>
	</author>
	
	<entry>
		<title>Private Repository to Build and Deploy Ghost Blog</title>
		<link href="https://www.jameslawler.com/articles/2021/12/17/private-repository-to-build-and-deploy-ghost-blog/"/>
		<updated>2021-12-17T00:00:00Z</updated>
		<id>https://www.jameslawler.com/articles/2021/12/17/private-repository-to-build-and-deploy-ghost-blog/</id>
		<content type="html">&lt;p&gt;This is a follow up from a previous post about setting up a Ghost Blog on GitHub pages using GitHub Actions. In that post I described using a public GitHub repository to host both the Ghost content folder and the generated static website. In this post I will show how to keep the Ghost content folder in a private repository and only host the generated static website in a public repository.&lt;/p&gt;
&lt;h2&gt;What you need&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;A public repository in GitHub that will hold the generated static website&lt;/li&gt;
&lt;li&gt;A private repository in GitHub that will hold your content folder and GitHub workflow&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Public Repository&lt;/h2&gt;
&lt;p&gt;Simply create a new repository in GitHub. You don&#39;t need to commit or push anything to it. This will happen automatically. The only thing you need to do is go to the repository settings and enable GitHub Pages on the &lt;strong&gt;gh-pages&lt;/strong&gt; branch.&lt;/p&gt;
&lt;h2&gt;Private Repository&lt;/h2&gt;
&lt;p&gt;Create a private repository in GitHub and setup your Ghost blog by following the guide from my previous post. The different is in the GitHub workflow file. Here you need to configure the &lt;strong&gt;Deploy to GitHub Pages&lt;/strong&gt; step to deploy to a different repository within your account.&lt;/p&gt;
&lt;pre class=&quot;language-yaml&quot; tabindex=&quot;0&quot;&gt;&lt;code class=&quot;language-yaml&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token key atrule&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Deploy to GitHub Pages
  &lt;span class=&quot;token key atrule&quot;&gt;uses&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; JamesIves/github&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;pages&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;deploy&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;action@4.1.7
  &lt;span class=&quot;token key atrule&quot;&gt;with&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;token key atrule&quot;&gt;branch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; gh&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;pages
  &lt;span class=&quot;token key atrule&quot;&gt;folder&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; static
  &lt;span class=&quot;token key atrule&quot;&gt;token&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; $
  &lt;span class=&quot;token key atrule&quot;&gt;repository-name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; jameslawler/jameslawler&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;website&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;By default, your GitHub workflow won&#39;t have permission to manipulate another repository. In order to do this, you need to &lt;a href=&quot;https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/creating-a-personal-access-token&quot;&gt;create a Personal Access Token&lt;/a&gt;. The token should have at least the &lt;strong&gt;public_repo&lt;/strong&gt; permission.&lt;/p&gt;
&lt;p&gt;Once you have the token you need to make it available to your GitHub workflow. Since this repository is private, you could just put it straight in the source code. But for better security practices, I would use a &lt;strong&gt;secret&lt;/strong&gt; which can be &lt;a href=&quot;https://docs.github.com/en/actions/security-guides/encrypted-secrets#creating-encrypted-secrets-for-a-repository&quot;&gt;configured at the repository&lt;/a&gt; and then is passed to the &lt;a href=&quot;https://docs.github.com/en/actions/security-guides/encrypted-secrets#using-encrypted-secrets-in-a-workflow&quot;&gt;GitHub workflow inside a secret context&lt;/a&gt;.&lt;/p&gt;
&lt;h2&gt;Testing it out&lt;/h2&gt;
&lt;p&gt;Once you have the public and private repositories setup, and you have the GitHub workflow modifications to connect the two repositories together, it is time to test it out. Trigger the GitHub workflow on the private repository. This will build the Ghost static site, and then push it to the &lt;strong&gt;gh-pages&lt;/strong&gt; branch of the public repository. Within a few minutes, the blog will be available on your GitHub pages url.&lt;/p&gt;
&lt;h2&gt;Summary&lt;/h2&gt;
&lt;p&gt;I set this up with a two repository approach myself because I wanted to keep the Ghost content folder and database secret. The content folder contains upcoming posts, theme code, and also anyone can connect to the database file directly and look inside the tables. This way, the only public potion is the generated static files which the user will be able to see anyway when browsing the blog.&lt;/p&gt;
</content>
	</entry>
	
	<entry>
		<title>Scheduled Posts with Ghost and GitHub Actions</title>
		<link href="https://www.jameslawler.com/articles/2021/12/11/scheduled-posts-with-ghost-and-github-actions/"/>
		<updated>2021-12-11T00:00:00Z</updated>
		<id>https://www.jameslawler.com/articles/2021/12/11/scheduled-posts-with-ghost-and-github-actions/</id>
		<content type="html">&lt;p&gt;Sometimes I want posts in my Ghost blog to only publish in the future on a set date. Ghost has the feature built in, but it is intended to be used with a dynamic Ghost blog that will instantly show the new post when the scheduled date is reached. As I run a static Ghost blog, I wanted to be able to have the same possibilities. To see how I setup a static Ghost blog on GitHub Pages you can see &lt;a href=&quot;https://www.jameslawler.com/tags/ghost/&quot;&gt;my other posts&lt;/a&gt; on the topic.&lt;/p&gt;
&lt;h2&gt;Scheduled Posts&lt;/h2&gt;
&lt;p&gt;In the Ghost editor when you save an article you have the option to &lt;strong&gt;Set it live now&lt;/strong&gt; or &lt;strong&gt;&lt;em&gt;Schedule it for later&lt;/em&gt;&lt;/strong&gt;. When you want to publish later, you can choose the date and time of the scheduled post.&lt;/p&gt;
&lt;p&gt;&lt;picture&gt;&lt;source type=&quot;image/avif&quot; srcset=&quot;https://www.jameslawler.com/img/tVzU4dhtzl-361.avif 361w&quot;&gt;&lt;source type=&quot;image/webp&quot; srcset=&quot;https://www.jameslawler.com/img/tVzU4dhtzl-361.webp 361w&quot;&gt;&lt;img alt=&quot;Ghost publish options&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot; src=&quot;https://www.jameslawler.com/img/tVzU4dhtzl-361.png&quot; width=&quot;361&quot; height=&quot;330&quot;&gt;&lt;/picture&gt;&lt;/p&gt;
&lt;p&gt;In order for the post to go live at the specified date and time, the Ghost server needs to be running. In order to achieve this, I have setup GitHub Actions to run automatically once a day on a fixed schedule. The workflow is the same as the previous posts with the addition of a &lt;a href=&quot;https://crontab.guru/&quot;&gt;cron&lt;/a&gt; schedule to the trigger section.&lt;/p&gt;
&lt;pre class=&quot;language-yaml&quot; tabindex=&quot;0&quot;&gt;&lt;code class=&quot;language-yaml&quot;&gt;&lt;span class=&quot;token key atrule&quot;&gt;on&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;token key atrule&quot;&gt;push&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token key atrule&quot;&gt;branches&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;main&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
  &lt;span class=&quot;token key atrule&quot;&gt;schedule&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token key atrule&quot;&gt;cron&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;0 20 * * *&quot;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;This workflow will trigger on a push to the &lt;strong&gt;main&lt;/strong&gt; branch, or everyday at 8pm UTC time. It is important to note that the cron schedule uses UTC time and so you will need to adjust it if you want it to match your local time. To have more granular post times, you would need to increase the frequency of the cron schedule.&lt;/p&gt;
&lt;h2&gt;Perfect Streak&lt;/h2&gt;
&lt;p&gt;The only &amp;quot;negative&amp;quot; with this approach is that it automatically makes daily commits to one of your repositories and it makes your GitHub contributions graph look not so honest.&lt;/p&gt;
&lt;p&gt;&lt;picture&gt;&lt;source type=&quot;image/avif&quot; srcset=&quot;https://www.jameslawler.com/img/ngCV2yWaAY-1334.avif 1334w&quot;&gt;&lt;source type=&quot;image/webp&quot; srcset=&quot;https://www.jameslawler.com/img/ngCV2yWaAY-1334.webp 1334w&quot;&gt;&lt;img alt=&quot;GitHub streak graph&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot; src=&quot;https://www.jameslawler.com/img/ngCV2yWaAY-1334.png&quot; width=&quot;1334&quot; height=&quot;325&quot;&gt;&lt;/picture&gt;&lt;/p&gt;
&lt;p&gt;You can see that from December onwards is when I enabled the daily GitHub Action to build and deploy my static Ghost blog. But apart from that, the solution is simple and works.&lt;/p&gt;
&lt;h2&gt;Summary&lt;/h2&gt;
&lt;p&gt;Using GitHub Actions with a cron schedule allows scheduled Ghost posts to go live within an acceptable timeframe of the publish date. I would say this is fine for a personal blog with infrequent posts. In the future I want to find a way to not publish to GitHub Pages if there were no updates. Perhaps checking if any new urls have been generated since the last time.&lt;/p&gt;
</content>
	</entry>
	
	<entry>
		<title>Custom Domain for Static Ghost Blog on GitHub Pages</title>
		<link href="https://www.jameslawler.com/articles/2021/12/04/custom-domain-for-static-ghost-blog-on-github-pages/"/>
		<updated>2021-12-04T00:00:00Z</updated>
		<id>https://www.jameslawler.com/articles/2021/12/04/custom-domain-for-static-ghost-blog-on-github-pages/</id>
		<content type="html">&lt;p&gt;In this post I will share how I run this static Ghost blog for free using GitHub Pages and a custom domain. This is a continuation from my previous post about starting a static Ghost blog on GitHub Pages.&lt;/p&gt;
&lt;h2&gt;GitHub Workflow&lt;/h2&gt;
&lt;p&gt;The only change needed for the GitHub Workflow file is to generate the static ghost site using the &lt;strong&gt;--url&lt;/strong&gt; parameter pointing to your custom domain.&lt;/p&gt;
&lt;pre class=&quot;language-yaml&quot; tabindex=&quot;0&quot;&gt;&lt;code class=&quot;language-yaml&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token key atrule&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Generate Static Site
  &lt;span class=&quot;token key atrule&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; gssg &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;url https&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;//www.jameslawler.com&lt;/code&gt;&lt;/pre&gt;
&lt;h2&gt;GitHub Pages Settings&lt;/h2&gt;
&lt;p&gt;On the GitHub Pages settings page you need to specify your custom domain, for example &lt;strong&gt;www.jameslawler.com&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;picture&gt;&lt;source type=&quot;image/avif&quot; srcset=&quot;https://www.jameslawler.com/img/py0z9ofhOO-1517.avif 1517w&quot;&gt;&lt;source type=&quot;image/webp&quot; srcset=&quot;https://www.jameslawler.com/img/py0z9ofhOO-1517.webp 1517w&quot;&gt;&lt;img alt=&quot;Custom domain configuration example&quot; loading=&quot;lazy&quot; decoding=&quot;async&quot; src=&quot;https://www.jameslawler.com/img/py0z9ofhOO-1517.png&quot; width=&quot;1517&quot; height=&quot;734&quot;&gt;&lt;/picture&gt;&lt;/p&gt;
&lt;h2&gt;Domain DNS Settings&lt;/h2&gt;
&lt;p&gt;The final step is to configure your domain name registry to point your domain name to GitHub Pages IP addresses. Depending on the domain registry they will have different interfaces to change the settings.&lt;/p&gt;
&lt;pre class=&quot;language-yaml&quot; tabindex=&quot;0&quot;&gt;&lt;code class=&quot;language-yaml&quot;&gt;        A record for @ pointing to 185.199.108.153
        A record for @ pointing to 185.199.109.153
        A record for @ pointing to 185.199.110.153
        A record for @ pointing to 185.199.111.153
        &lt;span class=&quot;token key atrule&quot;&gt;CNAME record for www pointing to your username.github.io (the username should be replaced with your actual GitHub account username)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;A lot of registrars have pages showing how to setup GitHub Pages on your domain. For example with Namecheap, you can see the information here. &lt;a href=&quot;https://www.namecheap.com/support/knowledgebase/article.aspx/9645/2208/how-do-i-link-my-domain-to-github-pages/&quot;&gt;https://www.namecheap.com/support/knowledgebase/article.aspx/9645/2208/how-do-i-link-my-domain-to-github-pages/&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;Summary&lt;/h2&gt;
&lt;p&gt;It can take some time (minutes to hours) for DNS records to update and for you to see your GitHub Page running on your custom domain. When it is up and running, check to make sure all the links work on your page, so you can confirm the &lt;strong&gt;gssg&lt;/strong&gt; generation worked successfully.&lt;/p&gt;
</content>
	</entry>
	
	<entry>
		<title>Ghost Blog on GitHub Pages using GitHub Actions</title>
		<link href="https://www.jameslawler.com/articles/2021/11/27/ghost-blog-on-github-pages-using-github-actions/"/>
		<updated>2021-11-27T00:00:00Z</updated>
		<id>https://www.jameslawler.com/articles/2021/11/27/ghost-blog-on-github-pages-using-github-actions/</id>
		<content type="html">&lt;p&gt;In this post I will share how I built up this website for free using Ghost CMS, GitHub Pages, and GitHub Actions.&lt;/p&gt;
&lt;h2&gt;Ghost&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://ghost.org/&quot;&gt;Ghost&lt;/a&gt; is a content management system for self publishing your own website - and it can be self hosted in a Docker container. To start this project you need to be running the Ghost Docker container on your development computer. This means you need to have Docker installed locally - and there is a &lt;a href=&quot;https://docs.docker.com/get-docker/&quot;&gt;handy guide&lt;/a&gt; on the Docker website for the main operating systems.&lt;/p&gt;
&lt;p&gt;Before starting up the Ghost Docker container you will need a directory where you can store the Ghost content (static assets, SQL database, etc). For this post I setup a &lt;a href=&quot;https://github.com/jameslawlercom/2021-11-27-ghost-blog-on-github-pages-using-github-actions&quot;&gt;new repository&lt;/a&gt; in GitHub to store the content so it would stay under version control.&lt;/p&gt;
&lt;p&gt;To start the Ghost Docker container on your local machine, open a console and navigate to the directory you have setup with a GitHub repository and execute the following command.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;docker run -d -p 2368:2368 -v content:/var/lib/ghost/content ghost:alpine&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;This command will run up the latest version of Ghost using the &lt;a href=&quot;https://hub.docker.com/_/ghost&quot;&gt;alpine Docker image&lt;/a&gt;. It will run on the standard &lt;strong&gt;2368&lt;/strong&gt; port and mount the current &lt;strong&gt;content&lt;/strong&gt; directory into the Docker container at &lt;strong&gt;/var/lib/ghost/content&lt;/strong&gt;. This means that any changes to the Ghost instance (new posts, theme, etc) will be exposed to the current working folder and can be committed to GitHub.&lt;/p&gt;
&lt;p&gt;After running the command, you should be able to access the locally running version of Ghost at &lt;strong&gt;http:// localhost:2368/&lt;/strong&gt;. At first you will need to setup an account (only saved in your local database), and then you will be able to add new pages, posts, and change the navigation settings etc. You will also be able to configure the theme for your website.&lt;/p&gt;
&lt;h2&gt;GitHub Workflow&lt;/h2&gt;
&lt;p&gt;Once there is a locally running instance of Ghost, the next step is to get it running in GitHub Pages. The key to do this is using GitHub Actions with the help of a GitHub workflow. To setup a GitHub workflow you need to add a &lt;strong&gt;.github&#92;workflows&lt;/strong&gt; folder. Each GitHub workflow is just a &lt;strong&gt;yaml&lt;/strong&gt; file within this directory.&lt;/p&gt;
&lt;pre class=&quot;language-yaml&quot; tabindex=&quot;0&quot;&gt;&lt;code class=&quot;language-yaml&quot;&gt;&lt;span class=&quot;token key atrule&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Deploy Ghost and Generate Static Site

&lt;span class=&quot;token key atrule&quot;&gt;on&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
&lt;span class=&quot;token key atrule&quot;&gt;push&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
&lt;span class=&quot;token key atrule&quot;&gt;branches&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;main&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;

&lt;span class=&quot;token key atrule&quot;&gt;jobs&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
&lt;span class=&quot;token key atrule&quot;&gt;build&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
&lt;span class=&quot;token key atrule&quot;&gt;runs-on&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; ubuntu&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;latest
&lt;span class=&quot;token key atrule&quot;&gt;steps&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token key atrule&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Check out Model Repository
&lt;span class=&quot;token key atrule&quot;&gt;uses&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token key atrule&quot;&gt;actions/checkout@v2 - name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Run Ghost
&lt;span class=&quot;token key atrule&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token key atrule&quot;&gt;docker run -d -p 2368:2368 -v $/content:/var/lib/ghost/content ghost:alpine - name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Sleep for 10 seconds
&lt;span class=&quot;token key atrule&quot;&gt;uses&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; jakejarvis/wait&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;action@master
&lt;span class=&quot;token key atrule&quot;&gt;with&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
&lt;span class=&quot;token key atrule&quot;&gt;time&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &quot;10s&quot; &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token key atrule&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Install ghost&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;static&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;site&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;generator
&lt;span class=&quot;token key atrule&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token key atrule&quot;&gt;npm install -g ghost-static-site-generator - name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Generate Static Site
&lt;span class=&quot;token key atrule&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token key atrule&quot;&gt;gssg --url https://jameslawlercom.github.io --subDir 2021-11-27-ghost-blog-on-github-pages-using-github-actions - name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Deploy to Github Pages
&lt;span class=&quot;token key atrule&quot;&gt;uses&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; JamesIves/github&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;pages&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;deploy&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;action@4.1.7
&lt;span class=&quot;token key atrule&quot;&gt;with&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
&lt;span class=&quot;token key atrule&quot;&gt;branch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; gh&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;pages
&lt;span class=&quot;token key atrule&quot;&gt;folder&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; static&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;In the first section, the trigger is configured. This means that this GitHub workflow will run when a commit is made on the &lt;strong&gt;main&lt;/strong&gt; branch.&lt;/p&gt;
&lt;pre class=&quot;language-yaml&quot; tabindex=&quot;0&quot;&gt;&lt;code class=&quot;language-yaml&quot;&gt;&lt;span class=&quot;token key atrule&quot;&gt;on&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
&lt;span class=&quot;token key atrule&quot;&gt;push&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
&lt;span class=&quot;token key atrule&quot;&gt;branches&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;main&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;The scripts section defines the different scripts that will run one after the other during the GitHub workflow. The first simply checks out the latest version of the code to the build instance.&lt;/p&gt;
&lt;pre class=&quot;language-yaml&quot; tabindex=&quot;0&quot;&gt;&lt;code class=&quot;language-yaml&quot;&gt;&lt;span class=&quot;token key atrule&quot;&gt;jobs&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
&lt;span class=&quot;token key atrule&quot;&gt;build&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
&lt;span class=&quot;token key atrule&quot;&gt;runs-on&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; ubuntu&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;latest
&lt;span class=&quot;token key atrule&quot;&gt;steps&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token key atrule&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Check out Model Repository
&lt;span class=&quot;token key atrule&quot;&gt;uses&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; actions/checkout@v2&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;The next script is similar to the command we use to run Ghost locally. This will actually run up the instance of Ghost on the GitHub Actions build virtual machine. The main difference here is the use of the build parameter &lt;strong&gt;$&lt;/strong&gt; to access the path to the working directory of the build folder.&lt;/p&gt;
&lt;pre class=&quot;language-yaml&quot; tabindex=&quot;0&quot;&gt;&lt;code class=&quot;language-yaml&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token key atrule&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Run Ghost
  &lt;span class=&quot;token key atrule&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; docker run &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;d &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;p 2368&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;2368 &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;v $/content&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;/var/lib/ghost/content ghost&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;alpine&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;As Ghost can take a few seconds to start up, a wait script is added to pause the process for 10 seconds.&lt;/p&gt;
&lt;pre class=&quot;language-yaml&quot; tabindex=&quot;0&quot;&gt;&lt;code class=&quot;language-yaml&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token key atrule&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Sleep for 10 seconds
  &lt;span class=&quot;token key atrule&quot;&gt;uses&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; jakejarvis/wait&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;action@master
  &lt;span class=&quot;token key atrule&quot;&gt;with&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;token key atrule&quot;&gt;time&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;10s&quot;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Once enough time has passed, the next script installs globally a npm script that can crawl the Ghost instance and generate a static version of the website.&lt;/p&gt;
&lt;pre class=&quot;language-yaml&quot; tabindex=&quot;0&quot;&gt;&lt;code class=&quot;language-yaml&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token key atrule&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Install ghost&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;static&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;site&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;generator
  &lt;span class=&quot;token key atrule&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; npm install &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;g ghost&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;static&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;site&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;generator&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;The next script will run this tool to do the crawl and generate a static version of the website into a folder called &lt;strong&gt;static&lt;/strong&gt;. The &lt;strong&gt;--url&lt;/strong&gt; property is used to specify the base domain of the static website (in this case a GitHub Pages site). The &lt;strong&gt;--subDir&lt;/strong&gt; property is used to specify a sub folder of the static website (in this case the name of the GitHub Pages project name).&lt;/p&gt;
&lt;pre class=&quot;language-yaml&quot; tabindex=&quot;0&quot;&gt;&lt;code class=&quot;language-yaml&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token key atrule&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Generate Static Site
  &lt;span class=&quot;token key atrule&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; gssg &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;url https&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;//jameslawlercom.github.io &lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;subDir 2021&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;11&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;27&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;ghost&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;blog&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;on&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;github&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;pages&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;using&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;github&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;actions&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Finally the last script will deploy the &lt;strong&gt;static&lt;/strong&gt; folder which contains our website to the &lt;strong&gt;gh-pages&lt;/strong&gt; branch of the repository so that it is available on GitHub Pages.&lt;/p&gt;
&lt;pre class=&quot;language-yaml&quot; tabindex=&quot;0&quot;&gt;&lt;code class=&quot;language-yaml&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token key atrule&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Deploy to Github Pages
  &lt;span class=&quot;token key atrule&quot;&gt;uses&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; JamesIves/github&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;pages&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;deploy&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;action@4.1.7
  &lt;span class=&quot;token key atrule&quot;&gt;with&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;token key atrule&quot;&gt;branch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; gh&lt;span class=&quot;token punctuation&quot;&gt;-&lt;/span&gt;pages
  &lt;span class=&quot;token key atrule&quot;&gt;folder&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; static&lt;/code&gt;&lt;/pre&gt;
&lt;h2&gt;GitHub Pages&lt;/h2&gt;
&lt;p&gt;The last stage of this project is to enable GitHub Pages on your repository. This is done via the &lt;strong&gt;Pages&lt;/strong&gt; tab in the &lt;a href=&quot;https://github.com/jameslawlercom/2021-11-27-ghost-blog-on-github-pages-using-github-actions/settings/pages&quot;&gt;repository settings&lt;/a&gt;.&lt;/p&gt;
&lt;h2&gt;Summary&lt;/h2&gt;
&lt;p&gt;After updating your blog using the Ghost admin website and push push to the main branch the changes, the ghost blog will be started in a docker container on the GitHub Actions server, a static version will be crawled automatically and then saved to the GitHub pages branch of the repository. A few minutes later, your website will be running on your GitHub Pages website.&lt;/p&gt;
&lt;p&gt;There is a demonstration repository available &lt;a href=&quot;https://github.com/jameslawlercom/2021-11-27-ghost-blog-on-github-pages-using-github-actions&quot;&gt;here&lt;/a&gt; which demonstrates the &lt;a href=&quot;https://github.com/jameslawlercom/2021-11-27-ghost-blog-on-github-pages-using-github-actions/actions&quot;&gt;GitHub Actions&lt;/a&gt; and &lt;a href=&quot;https://jameslawlercom.github.io/2021-11-27-ghost-blog-on-github-pages-using-github-actions/&quot;&gt;GitHub Pages&lt;/a&gt; project.&lt;/p&gt;
</content>
	</entry>
</feed>
